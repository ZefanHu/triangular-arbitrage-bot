# Coreæ¨¡å—æµ‹è¯•ç³»ç»Ÿ

æœ¬æµ‹è¯•ç³»ç»Ÿä¸ºä¸‰è§’å¥—åˆ©æœºå™¨äººçš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æä¾›å…¨é¢çš„æµ‹è¯•éªŒè¯ï¼Œä½¿ç”¨çœŸå®çš„OKX APIè·å–å¸‚åœºæ•°æ®ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨å®é™…ç¯å¢ƒä¸­çš„ç¨³å®šæ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚

## ğŸ¯ æµ‹è¯•ç›®æ ‡

- **éªŒè¯æ‰€æœ‰coreæ¨¡å—åŠŸèƒ½æ­£å¸¸**
- **æ£€æµ‹æ¨¡å—é—´æ˜¯å¦å­˜åœ¨å†²çª**
- **ä½¿ç”¨çœŸå®OKX APIæµ‹è¯•ï¼ˆè™šæ‹Ÿè´¦æˆ·ï¼‰**
- **ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§å’Œæ€§èƒ½**

## ğŸ“‹ æµ‹è¯•è¦†ç›–èŒƒå›´

### æ ¸å¿ƒæ¨¡å—æµ‹è¯•
1. **é…ç½®ç®¡ç†å™¨ (config_manager)** - é…ç½®åŠ è½½å’ŒéªŒè¯
2. **OKXå®¢æˆ·ç«¯ (okx_client)** - APIè¿æ¥å’Œæ•°æ®è·å–
3. **æ•°æ®é‡‡é›†å™¨ (data_collector)** - RESTå’ŒWebSocketæ•°æ®æ•´åˆ
4. **å¥—åˆ©å¼•æ“ (arbitrage_engine)** - ä¸‰è§’å¥—åˆ©æœºä¼šè®¡ç®—
5. **é£é™©ç®¡ç†å™¨ (risk_manager)** - äº¤æ˜“é£é™©æ§åˆ¶
6. **äº¤æ˜“æ‰§è¡Œå™¨ (trade_executor)** - äº¤æ˜“æ‰§è¡Œé€»è¾‘ï¼ˆå®‰å…¨æ¨¡å¼ï¼‰
7. **WebSocketç®¡ç†å™¨ (websocket_manager)** - å®æ—¶æ•°æ®è¿æ¥
8. **äº¤æ˜“æ§åˆ¶å™¨ (trading_controller)** - ç³»ç»Ÿæ•´ä½“åè°ƒ

### ç³»ç»Ÿæµ‹è¯•
- **é›†æˆæµ‹è¯•** - å„æ¨¡å—åä½œéªŒè¯
- **æ€§èƒ½æµ‹è¯•** - å“åº”æ—¶é—´å’Œèµ„æºä½¿ç”¨
- **é”™è¯¯å¤„ç†æµ‹è¯•** - å¼‚å¸¸æ¢å¤èƒ½åŠ›

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. **é…ç½®APIå¯†é’¥**
   ```bash
   cp config/secrets.ini.example config/secrets.ini
   # ç¼–è¾‘secrets.iniï¼Œå¡«å…¥ä½ çš„OKX APIå¯†é’¥
   ```

2. **ç¡®ä¿è™šæ‹Ÿç¯å¢ƒ**
   ```bash
   source venv/bin/activate  # Linux/Mac
   # æˆ–
   venv\Scripts\activate     # Windows
   ```

### è¿è¡Œæµ‹è¯•

#### å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èï¼‰
```bash
python run_core_tests.py
```
- è¿è¡Œå…³é”®åŠŸèƒ½éªŒè¯
- çº¦2-3åˆ†é’Ÿå®Œæˆ
- é€‚åˆæ—¥å¸¸æ£€æŸ¥

#### å®Œæ•´æµ‹è¯•
```bash
python run_core_tests.py --full
```
- è¿è¡Œæ‰€æœ‰æµ‹è¯•é¡¹ç›®
- çº¦5-10åˆ†é’Ÿå®Œæˆ
- ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š

#### ç›´æ¥è¿è¡Œç»¼åˆæµ‹è¯•
```bash
python test_core_comprehensive.py
```
- æœ€å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- åŒ…å«æ‰€æœ‰æµ‹è¯•åŠŸèƒ½
- ç”ŸæˆJSONæ ¼å¼è¯¦ç»†æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•è¾“å‡º

### å®æ—¶æ—¥å¿—
æµ‹è¯•è¿‡ç¨‹ä¸­ä¼šæ˜¾ç¤ºå®æ—¶è¿›åº¦ï¼š
```
ğŸ”§ å¼€å§‹é…ç½®ç®¡ç†å™¨æµ‹è¯•...
âœ… config_test é€šè¿‡
ğŸŒ å¼€å§‹OKX APIæµ‹è¯•...
âœ… okx_api_test é€šè¿‡
```

### æµ‹è¯•æŠ¥å‘Š
å®Œæ•´æµ‹è¯•ä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
- `logs/core_test_YYYYMMDD_HHMMSS.log` - è¯¦ç»†æµ‹è¯•æ—¥å¿—
- `logs/core_test_report_YYYYMMDD_HHMMSS.json` - JSONæ ¼å¼æµ‹è¯•æŠ¥å‘Š

### æŠ¥å‘Šç¤ºä¾‹
```
==============================================================
Coreæ¨¡å—ç»¼åˆæµ‹è¯•æŠ¥å‘Š
==============================================================
æµ‹è¯•æ—¶é—´: 20250717_143022
è¿è¡Œæ—¶é•¿: 156.78ç§’
æ€»æµ‹è¯•æ•°: 10
é€šè¿‡æµ‹è¯•: 9
å¤±è´¥æµ‹è¯•: 1
æˆåŠŸç‡: 90.00%

è¯¦ç»†ç»“æœ:
âœ… config_test: passed
âœ… okx_api_test: passed
âœ… data_collector_test: passed
âœ… arbitrage_engine_test: passed
âœ… risk_manager_test: passed
âœ… trade_executor_test: passed
âŒ websocket_test: failed
âœ… integration_test: passed
âœ… performance_test: passed
âœ… error_handling_test: passed
```

## ğŸ”§ APIé…ç½®è¯´æ˜

### å¿…éœ€é…ç½®
åœ¨ `config/secrets.ini` ä¸­è®¾ç½®ï¼š

```ini
[api]
api_key = your_api_key_here
secret_key = your_secret_key_here
passphrase = your_passphrase_here
flag = 1  # 1=è™šæ‹Ÿè´¦æˆ·, 0=å®ç›˜è´¦æˆ·
```

âš ï¸ **é‡è¦**: 
- ç¡®ä¿ä½¿ç”¨è™šæ‹Ÿè´¦æˆ· (`flag = 1`)
- ä¸è¦å°†çœŸå®APIå¯†é’¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- æµ‹è¯•ä¸ä¼šæ‰§è¡ŒçœŸå®äº¤æ˜“

## ğŸ›¡ï¸ å®‰å…¨ä¿è¯

### äº¤æ˜“å®‰å…¨
- **åªä½¿ç”¨è™šæ‹Ÿè´¦æˆ·** - `flag = 1` è®¾ç½®
- **äº¤æ˜“æ‰§è¡Œå™¨å®‰å…¨æ¨¡å¼** - åªéªŒè¯å‚æ•°ï¼Œä¸å®é™…ä¸‹å•
- **é£é™©ç®¡ç†éªŒè¯** - ç¡®ä¿æ‰€æœ‰å®‰å…¨æœºåˆ¶æ­£å¸¸

### æ•°æ®å®‰å…¨
- **APIå¯†é’¥ä¿æŠ¤** - ä¸è®°å½•åœ¨æ—¥å¿—ä¸­
- **æœ¬åœ°æµ‹è¯•** - æ‰€æœ‰æµ‹è¯•åœ¨æœ¬åœ°ç¯å¢ƒæ‰§è¡Œ
- **æ— æ•æ„Ÿä¿¡æ¯æ³„éœ²** - æµ‹è¯•æŠ¥å‘Šä¸åŒ…å«å¯†é’¥ä¿¡æ¯

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

### é¢„æœŸå“åº”æ—¶é—´
- **ä½™é¢æŸ¥è¯¢**: < 2ç§’
- **è®¢å•ç°¿è·å–**: < 3ç§’
- **å¥—åˆ©è®¡ç®—**: < 1ç§’
- **WebSocketè¿æ¥**: < 5ç§’

### èµ„æºä½¿ç”¨
- **å†…å­˜å¢é•¿**: < 100MB
- **CPUä½¿ç”¨**: æ­£å¸¸èŒƒå›´
- **ç½‘ç»œè¯·æ±‚**: æ§åˆ¶åœ¨åˆç†é¢‘ç‡

## ğŸ› å¸¸è§é—®é¢˜

### APIè¿æ¥å¤±è´¥
```
âŒ okx_api_test å¤±è´¥: APIè¿æ¥é”™è¯¯
```
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯APIå¯†é’¥æ­£ç¡®æ€§
3. ç¡®è®¤APIæƒé™è®¾ç½®
4. æ£€æŸ¥IPç™½åå•è®¾ç½®

### WebSocketè¿æ¥å¼‚å¸¸
```
âŒ websocket_test å¤±è´¥: WebSocketè¿æ¥å¤±è´¥
```
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
2. ç¡®è®¤WebSocketç«¯å£æœªè¢«å ç”¨
3. éªŒè¯ä»£ç†è®¾ç½®

### é…ç½®éªŒè¯å¤±è´¥
```
âŒ config_test å¤±è´¥: é…ç½®éªŒè¯å¼‚å¸¸
```
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `config/settings.ini` æ ¼å¼
2. éªŒè¯æ•°å€¼èŒƒå›´åˆç†æ€§
3. ç¡®è®¤å¿…éœ€é…ç½®é¡¹å­˜åœ¨

## ğŸ” æ·±åº¦æµ‹è¯•è¯´æ˜

### å¥—åˆ©å¼•æ“æµ‹è¯•
- éªŒè¯ä¸‰è§’å¥—åˆ©è·¯å¾„é…ç½®
- æµ‹è¯•åˆ©æ¶¦è®¡ç®—ç®—æ³•
- æ£€æŸ¥æ‰‹ç»­è´¹å’Œæ»‘ç‚¹å¤„ç†

### é£é™©ç®¡ç†æµ‹è¯•
- éªŒè¯ä»“ä½é™åˆ¶æœºåˆ¶
- æµ‹è¯•äº¤æ˜“é¢‘ç‡æ§åˆ¶
- æ£€æŸ¥èµ„é‡‘å®‰å…¨ä¿æŠ¤

### æ•°æ®é‡‡é›†æµ‹è¯•
- éªŒè¯REST APIæ•°æ®è·å–
- æµ‹è¯•WebSocketå®æ—¶æ•°æ®
- æ£€æŸ¥æ•°æ®ç¼“å­˜æœºåˆ¶

## ğŸ“ æ‰©å±•æµ‹è¯•

### æ·»åŠ è‡ªå®šä¹‰æµ‹è¯•
å¦‚éœ€æ·»åŠ ç‰¹å®šæµ‹è¯•åŠŸèƒ½ï¼Œåœ¨ `test_core_comprehensive.py` ä¸­ï¼š

```python
async def test_custom_feature(self) -> bool:
    """è‡ªå®šä¹‰åŠŸèƒ½æµ‹è¯•"""
    try:
        # æµ‹è¯•é€»è¾‘
        result = custom_test_logic()
        
        details = {'test_result': result}
        success = result is not None
        
        self.log_test_result('custom_test', success, details)
        return success
    except Exception as e:
        self.log_test_result('custom_test', False, {'error': str(e)})
        return False
```

### æµ‹è¯•ç¯å¢ƒé…ç½®
å¯åœ¨ `config/settings.ini` ä¸­è°ƒæ•´æµ‹è¯•å‚æ•°ï¼š
- æœ€å°äº¤æ˜“é‡‘é¢
- è¶…æ—¶æ—¶é—´è®¾ç½®
- é‡è¯•æ¬¡æ•°é…ç½®

## ğŸ“ æ”¯æŒ

å¦‚é‡åˆ°æµ‹è¯•é—®é¢˜ï¼š
1. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—æ–‡ä»¶
2. æ£€æŸ¥æµ‹è¯•æŠ¥å‘ŠJSON
3. éªŒè¯é…ç½®æ–‡ä»¶æ­£ç¡®æ€§
4. ç¡®è®¤ç½‘ç»œç¯å¢ƒç¨³å®š

---

**æ³¨æ„**: æœ¬æµ‹è¯•ç³»ç»Ÿä¸“ä¸ºå¼€å‘å’ŒéªŒè¯ç›®çš„è®¾è®¡ï¼Œç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰æ‰€æœ‰æµ‹è¯•é€šè¿‡ã€‚